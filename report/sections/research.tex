
Three important facts of DrRacket's framework were heavily used: one, the organization of DrRacket's user interface follows the hierarchy seen in figure \ref{fig:gui-classes}; two, DrRacket generates a test coverage info hash table that contains information for all uncompiled required files; and three, the test info hash table persists after code coloring has been applied.

DrRacket's user interface is composed of four main classes, seen as boxes in figure \ref{fig:gui-classes}. The highest class is the \emph{frame}. The \emph{frame} is an entire DrRacket environment as seen in figure \ref{fig:drracket}. Each frame has at least one \emph{tab}. A \emph{tab} always contains a definitions window, where the source code is visible and editable. A \emph{tab} may also contain an interactions window. Additionally, the frame group contains a list of all currently open \emph{frames}.

\newfigure{gui-classes}{DrRacket User Interface Classes}{width=6cm}{h!} 

%add detail about testing methods
When a program is run DrRacket generates a hash table, called \emph{test-coverage-info} internally. Included in the hash table are expressions, with their respective source code location, and whether or not they have been evaluated. By examining the contents of the test coverage info hash table, for a program that includes multiple files, we discovered that coverage information is collected for all uncompiled files. So while DrRacket's default code coverage only applies code coloring to the active file, the test coverage info hash table has the information needed to color additional files. Code coverage is not collected for compiled files because the compiled version can not be instrumented to track executed expressions. DrRacket, by default, will load compiled versions of code if possible. However, if it were possible to select between compiled and uncompiled versions, then instrumentation could theoretically be applied to every required file. Figure \ref{fig:default-flow} shows the simplified program flow for code coverage and code highlighting in DrRacket before the solution implemented by this senior project. Starting at \textbf{active source file}, when the user presses the ``Run'' button DrRacket will \textbf{require} all the \textbf{source files} and \textbf{compiled files} needed. Then, if code coverage is enabled, DrRacket \textbf{instruments} the code and then \textbf{evaluates} it. This produces both the program's \textbf{output} and the \textbf{test coverage info}. The \textbf{test coverage info} is then sent back to the \textbf{active source file} and \textbf{code coverage coloring} is done.

\newfigure{default-flow}{DrRacket Code Coverage Flow}{width=7.5cm}{h!}

The test coverage info hash table can be sent to a method of DrRacket's \emph{tab} class, called \emph{show-test-coverage-annotations}, which does code coloring for that tab based on the hash table. This hash remains available for use after code coloring has been completed. In order to clear the test coverage info hash table an additional method, \emph{clear-test-coverage}, must be called. 

